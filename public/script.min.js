import e from "./cookieManger.js";
let cookieManager = new e();
cookieManager.init(),
  document.addEventListener("DOMContentLoaded", () => {
    let e = document.querySelector(".explorer-menu"),
      t = document.querySelector(".nav-menu"),
      n = t.querySelectorAll("a"),
      i = document.querySelector(".ide-container"),
      s = () => window.innerWidth < 768,
      r = () => {
        s() && (t.classList.remove("active"), e.classList.remove("active"));
      },
      a = (n) => {
        !s() || t.contains(n.target) || e.contains(n.target) || r();
      };
    e.addEventListener("click", (n) => {
      n.stopPropagation(),
        t.classList.toggle("active"),
        e.classList.toggle("active");
    }),
      n.forEach((e) => {
        e.addEventListener("click", r);
      }),
      document.addEventListener("click", a),
      i.addEventListener("scroll", r, { passive: !0 });
    let o = document.getElementById("current-year");
    (o.textContent = new Date().getFullYear()),
      document.addEventListener("touchstart", () => {}, { passive: !0 }),
      document.addEventListener("touchmove", () => {}, { passive: !0 }),
      document.addEventListener("wheel", () => {}, { passive: !0 });
  }),
  document
    .querySelector(".projects-dropdown")
    .addEventListener("click", function () {
      requestAnimationFrame(() => {
        this.classList.toggle("active"),
          document
            .querySelector(".projects-submenu")
            .classList.toggle("active");
      });
    }),
  document
    .querySelector(".vs-code-icon")
    .addEventListener("click", function () {
      let e = document.getElementById("meowSound");
      (e.volume = 0.2), e.play();
    });
let observer = new IntersectionObserver(
  (e) => {
    e.forEach((e) => {
      let t = e.target;
      requestAnimationFrame(() => {
        let n = e.isIntersecting ? "animate-slide-in" : "reset-animation",
          i = e.isIntersecting ? "reset-animation" : "animate-slide-in";
        t.classList.remove(i), t.classList.add(n);
      });
    });
  },
  { threshold: 0.1 }
);
document.querySelectorAll(".animate-slide-in").forEach((e) => {
  observer.observe(e);
});
